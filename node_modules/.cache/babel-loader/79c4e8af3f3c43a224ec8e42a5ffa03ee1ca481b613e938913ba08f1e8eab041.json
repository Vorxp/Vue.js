{"ast":null,"code":"export default {\n  name: \"SubjEdit\",\n  props: [\"subId\"],\n  data() {\n    return {\n      subjs: [],\n      editSuccess: false,\n      editError: false,\n      errMessage: ''\n    };\n  },\n  mounted() {\n    fetch('http://localhost:3000/course/' + this.subId).then(res => res.json()).then(data => this.subjs = data[0]) // แก้ไขให้เรียกใช้ data[0] เพราะว่าข้อมูลจะอยู่ในรูปแบบ Array ซึ่งเราต้องการข้อมูลใน index ที่ 0\n    .catch(err => console.log(err.message));\n  },\n  methods: {\n    //Method ที่ทำงานเมื่อมีการ Submit\n    handleSubmit() {\n      //สร้าง Object เพื่อเตรียมส่งข้อมูล - ค่า properties ที่ v-model กับ form ไว้\n      let subjects = {\n        SubjID: this.subjs.id,\n        SubjNameTh: this.subjs.name,\n        SubjName: this.subjs.nameeng,\n        Credit: this.subjs.credit,\n        year: this.subjs.yr,\n        Grade: this.subjs.grade,\n        Semester: this.subjs.sem,\n        isShow: false\n      };\n      //กำหนดการติดต่อกับ endpoint ระบุ Method POST\n      fetch('http://localhost:3000/course/' + this.subId, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(subjects)\n      }).then(() => {\n        this.editSuccess = true;\n      }).catch(err => {\n        this.editError = true;\n        this.editMessage = err;\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","props","data","subjs","editSuccess","editError","errMessage","mounted","fetch","subId","then","res","json","catch","err","console","log","message","methods","handleSubmit","subjects","SubjID","id","SubjNameTh","SubjName","nameeng","Credit","credit","year","yr","Grade","grade","Semester","sem","isShow","method","headers","body","JSON","stringify","editMessage"],"sources":["D:\\comsci\\yr 2-2\\projectfianl\\src\\components\\SubjEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-body\">\r\n      <h5 class=\"text-primary\">แก้ไขข้อมูล</h5>\r\n      <form @submit.prevent=\"handleSubmit()\">\r\n        <div class=\"row\">\r\n          <div class=\"col-lg-2 col-md-4 col-sm-6 mt-2\">\r\n            <label for=\"subjId\" class=\"form-label\">รหัสวิชา</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"subjId\"\r\n              class=\"form-control\"\r\n              v-model.trim=\"subjs.id\"\r\n            />\r\n          </div>\r\n          <div class=\"col-lg-2 col-md-8 col-sm-6 mt-2\">\r\n            <label for=\"subjNameTh\" class=\"form-label\">ชื่อวิชาภาษาไทย</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"subjNameTh\"\r\n              class=\"form-control\"\r\n              v-model.trim=\"subjs.name\"\r\n            />\r\n          </div>\r\n          <div class=\"col-lg-2 col-md-8 col-sm-6 mt-2\">\r\n            <label for=\"subjName\" class=\"form-label\">ชื่อวิชาภาษาอังกฤษ</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"subjName\"\r\n              class=\"form-control\"\r\n              v-model.trim=\"subjs.nameeng\"\r\n            />\r\n          </div>\r\n          <div class=\"col-lg-2 col-md-4 col-sm-6 mt-2\">\r\n            <label for=\"subjId\" class=\"form-label\">หน่วยกิต</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"subjId\"\r\n              class=\"form-control\"\r\n              v-model.trim=\"subjs.credit\"\r\n            />\r\n          </div>\r\n          <div class=\"col-lg-2 col-md-3 col-sm-4 mt-2\">\r\n            <label for=\"stdGrade\" class=\"form-label\">เกรด</label>\r\n            <select id=\"stdGrade\" class=\"form-select\" v-model=\"subjs.grade\">\r\n              <option value=\"A\">A</option>\r\n              <option value=\"B+\">B+</option>\r\n              <option value=\"B\">B</option>\r\n              <option value=\"C+\">C+</option>\r\n              <option value=\"C\">C</option>\r\n              <option value=\"D+\">D+</option>\r\n              <option value=\"D\">D</option>\r\n              <option value=\"F\">F</option>\r\n              <option value=\"W\">W</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"col-lg-2 col-md-3 col-sm-4 mt-2\">\r\n            <label for=\"\" class=\"form-label\">ภาคการศึกษา</label>\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"radio\"\r\n                id=\"stdsem\"\r\n                value=\"ภาคต้น\"\r\n                v-model=\"subjs.sem\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"stdsem\">ภาคต้น</label>\r\n            </div>\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"radio\"\r\n                id=\"stdsem\"\r\n                value=\"ภาคปลาย\"\r\n                v-model=\"subjs.sem\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"stdsem\">ภาคปลาย</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2 mt-4 d-flex align-items-center\">\r\n        <button id=\"btnSubmit\" type=\"submit\" class=\"btn btn-primary \"> บันทึกการแก้ไข </button>\r\n    </div>\r\n\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <div class=\"alert alert-success mt-2\" v-show=\"editSuccess\">\r\n    แก้ไขข้อมูล {{ subjs.SubjID }} - {{ subjs.SubjNameTh }} สำเร็จ\r\n  </div>\r\n  <div class=\"alert alert-danger mt-2\" v-show=\"EditError\">\r\n    {{ errMessage }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"SubjEdit\",\r\n    props:[\"subId\"],\r\n    data(){\r\n      return{\r\n        subjs:[],\r\n        editSuccess: false,\r\n        editError: false,\r\n        errMessage: ''\r\n      }\r\n    },\r\n    mounted() {\r\n    fetch('http://localhost:3000/course/' + this.subId)\r\n        .then(res => res.json())\r\n        .then(data => this.subjs = data[0]) // แก้ไขให้เรียกใช้ data[0] เพราะว่าข้อมูลจะอยู่ในรูปแบบ Array ซึ่งเราต้องการข้อมูลใน index ที่ 0\r\n        .catch(err => console.log(err.message))\r\n},\r\n    methods:{\r\n      //Method ที่ทำงานเมื่อมีการ Submit\r\nhandleSubmit() {\r\n    //สร้าง Object เพื่อเตรียมส่งข้อมูล - ค่า properties ที่ v-model กับ form ไว้\r\n    let subjects = {\r\n        SubjID: this.subjs.id,\r\n        SubjNameTh: this.subjs.name,\r\n        SubjName: this.subjs.nameeng,\r\n        Credit: this.subjs.credit,\r\n        year: this.subjs.yr,\r\n        Grade: this.subjs.grade,\r\n        Semester: this.subjs.sem,\r\n        isShow: false,\r\n    }\r\n    //กำหนดการติดต่อกับ endpoint ระบุ Method POST\r\n    fetch('http://localhost:3000/course/' + this.subId, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(subjects)\r\n    })\r\n        .then(() => {\r\n            this.editSuccess = true\r\n        })\r\n        .catch((err) => {\r\n            this.editError = true\r\n            this.editMessage = err\r\n        })\r\n}\r\n\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"mappings":"AAgGA,eAAe;EACXA,IAAI,EAAC,UAAU;EACfC,KAAK,EAAC,CAAC,OAAO,CAAC;EACfC,IAAIA,CAAA,EAAE;IACJ,OAAM;MACJC,KAAK,EAAC,EAAE;MACRC,WAAW,EAAE,KAAK;MAClBC,SAAS,EAAE,KAAK;MAChBC,UAAU,EAAE;IACd;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACVC,KAAK,CAAC,+BAA8B,GAAI,IAAI,CAACC,KAAK,EAC7CC,IAAI,CAACC,GAAE,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,EACtBF,IAAI,CAACR,IAAG,IAAK,IAAI,CAACC,KAAI,GAAID,IAAI,CAAC,CAAC,CAAC,EAAE;IAAA,CACnCW,KAAK,CAACC,GAAE,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,OAAO,CAAC;EAC9C,CAAC;EACGC,OAAO,EAAC;IACN;IACNC,YAAYA,CAAA,EAAG;MACX;MACA,IAAIC,QAAO,GAAI;QACXC,MAAM,EAAE,IAAI,CAAClB,KAAK,CAACmB,EAAE;QACrBC,UAAU,EAAE,IAAI,CAACpB,KAAK,CAACH,IAAI;QAC3BwB,QAAQ,EAAE,IAAI,CAACrB,KAAK,CAACsB,OAAO;QAC5BC,MAAM,EAAE,IAAI,CAACvB,KAAK,CAACwB,MAAM;QACzBC,IAAI,EAAE,IAAI,CAACzB,KAAK,CAAC0B,EAAE;QACnBC,KAAK,EAAE,IAAI,CAAC3B,KAAK,CAAC4B,KAAK;QACvBC,QAAQ,EAAE,IAAI,CAAC7B,KAAK,CAAC8B,GAAG;QACxBC,MAAM,EAAE;MACZ;MACA;MACA1B,KAAK,CAAC,+BAA8B,GAAI,IAAI,CAACC,KAAK,EAAE;QAChD0B,MAAM,EAAE,OAAO;QACfC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACnB,QAAQ;MACjC,CAAC,EACIV,IAAI,CAAC,MAAM;QACR,IAAI,CAACN,WAAU,GAAI,IAAG;MAC1B,CAAC,EACAS,KAAK,CAAEC,GAAG,IAAK;QACZ,IAAI,CAACT,SAAQ,GAAI,IAAG;QACpB,IAAI,CAACmC,WAAU,GAAI1B,GAAE;MACzB,CAAC;IACT;EAEI;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}